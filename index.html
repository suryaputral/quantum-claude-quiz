<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Квантовая викторина Клода</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rubik', sans-serif;
            background-color: black;
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        
        .main-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .title-line1 {
            font-size: 4.5rem;
            font-weight: 900;
            letter-spacing: -2px;
            line-height: 1;
        }
        
        .title-line2 {
            font-size: 3.75rem;
            font-weight: 300;
            line-height: 1;
        }
        
        .title-line3 {
            font-size: 3rem;
            font-weight: 500;
            line-height: 1;
        }
        
        .divider {
            width: 8rem;
            height: 4px;
            background: white;
            margin: 2rem auto;
        }
        
        .subtitle {
            font-size: 1.25rem;
            font-weight: 300;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }
        
        .description {
            font-size: 1.125rem;
            opacity: 0.6;
            margin-bottom: 2rem;
        }
        
        .level-card {
            max-width: 64rem;
            margin: 0 auto;
            border: 2px solid white;
            padding: 2rem;
            margin-bottom: 3rem;
        }
        
        .level-title {
            font-size: 1.875rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .level-description {
            font-size: 1.125rem;
            font-weight: 300;
            margin-bottom: 2rem;
            opacity: 0.9;
            text-align: center;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .category-card {
            border: 1px solid white;
            padding: 1rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .category-card:hover {
            background: white;
            color: black;
        }
        
        .category-icon {
            font-size: 1.875rem;
            margin-bottom: 0.5rem;
        }
        
        .category-title {
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .category-desc {
            font-size: 0.75rem;
            opacity: 0.7;
            line-height: 1.3;
        }
        
        .warning-text {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .warning-main {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 1rem;
        }
        
        .warning-sub {
            font-size: 0.875rem;
            opacity: 0.6;
        }
        
        .start-button {
            background: white;
            color: black;
            border: none;
            font-size: 1.25rem;
            padding: 1.5rem 4rem;
            font-weight: 700;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rubik', sans-serif;
        }
        
        .start-button:hover {
            background: #e5e5e5;
            transform: scale(1.05);
        }
        
        .footer {
            text-align: center;
            margin-top: 3rem;
            opacity: 0.6;
        }
        
        .footer-divider {
            width: 4rem;
            height: 1px;
            background: white;
            margin: 0 auto 1rem;
        }
        
        .footer-text {
            font-size: 0.875rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
        }
        
        .footer-contacts {
            font-size: 0.75rem;
        }
        
        .game-container {
            max-width: 64rem;
            margin: 0 auto;
            padding: 1.5rem;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .game-stats {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .stat-item {
            font-size: 1.125rem;
            font-weight: 300;
        }
        
        .category-badge {
            border: 1px solid white;
            padding: 0.5rem 1rem;
            font-weight: 700;
            font-size: 0.875rem;
        }
        
        .progress-container {
            margin-bottom: 2rem;
        }
        
        .progress-bar {
            background: #374151;
            height: 8px;
            margin-bottom: 1rem;
        }
        
        .progress-fill {
            background: white;
            height: 8px;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            text-align: center;
            opacity: 0.8;
            font-weight: 300;
        }
        
        .question-card {
            border: 2px solid white;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .question-title {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .answer-button {
            padding: 1.5rem;
            border: 2px solid #6b7280;
            background: black;
            color: white;
            text-align: left;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            font-weight: 300;
            font-size: 1rem;
            line-height: 1.4;
            transition: all 0.3s ease;
        }
        
        .answer-button:hover:not(:disabled) {
            border-color: white;
            background: #111111;
        }
        
        .answer-button.selected {
            background: white;
            color: black;
            border-color: white;
        }
        
        .answer-button.correct {
            background: #059669;
            color: white;
            border-color: #059669;
        }
        
        .answer-button.incorrect {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }
        
        .answer-button:disabled {
            cursor: not-allowed;
        }
        
        .answer-label {
            font-weight: 700;
            margin-right: 1rem;
        }
        
        .action-button {
            background: white;
            color: black;
            border: none;
            padding: 0.75rem 3rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
        }
        
        .action-button:hover {
            background: #e5e5e5;
        }
        
        .action-button-outline {
            background: black;
            color: white;
            border: 2px solid white;
            padding: 0.75rem 3rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
            margin-right: 1rem;
        }
        
        .action-button-outline:hover {
            background: white;
            color: black;
        }
        
        .action-button-gray {
            background: black;
            color: white;
            border: 1px solid #6b7280;
            padding: 0.75rem 3rem;
            font-weight: 300;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
        }
        
        .action-button-gray:hover {
            border-color: white;
        }
        
        .explanation-box {
            border: 1px solid #6b7280;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .explanation-text {
            opacity: 0.9;
            font-weight: 300;
            line-height: 1.6;
        }
        
        .result-container {
            max-width: 64rem;
            margin: 0 auto;
            padding: 1.5rem;
            text-align: center;
        }
        
        .result-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 3rem;
            letter-spacing: -1px;
        }
        
        .result-subtitle {
            font-size: 2.5rem;
            font-weight: 300;
        }
        
        .result-card {
            border: 2px solid white;
            padding: 3rem;
            margin-bottom: 3rem;
        }
        
        .result-emoji {
            font-size: 5rem;
            margin-bottom: 2rem;
        }
        
        .result-level {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            letter-spacing: 2px;
        }
        
        .result-score {
            font-size: 1.875rem;
            font-weight: 300;
            margin-bottom: 2rem;
        }
        
        .result-divider {
            width: 6rem;
            height: 4px;
            background: white;
            margin: 0 auto 2rem;
        }
        
        .result-message-box {
            border: 1px solid #6b7280;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .result-message {
            font-size: 1.125rem;
            font-weight: 300;
            line-height: 1.6;
            opacity: 0.9;
        }
        
        .secret-box {
            border: 2px solid white;
            padding: 1.5rem;
            margin-bottom: 2rem;
            background: white;
            color: black;
        }
        
        .secret-text {
            font-weight: 700;
            font-size: 1.125rem;
        }
        
        .credits {
            font-size: 0.875rem;
            font-weight: 300;
            opacity: 0.6;
            margin-bottom: 2rem;
        }
        
        .button-group {
            margin-top: 2rem;
        }
        
        .button-group button {
            margin: 0.5rem;
        }
        
        .text-center {
            text-align: center;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .title-line1 {
                font-size: 3rem;
            }
            
            .title-line2 {
                font-size: 2.5rem;
            }
            
            .title-line3 {
                font-size: 2rem;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .game-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .button-group {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .button-group button {
                margin: 0.25rem 0;
                width: 300px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Menu Screen -->
        <div id="menu-screen">
            <div class="container">
                <div class="main-title">
                    <div class="title-line1">QUANTUM</div>
                    <div class="title-line2">INTELLIGENCE</div>
                    <div class="title-line3">TEST</div>
                    <div class="divider"></div>
                    <p class="subtitle">Входной экзамен на общую эрудицию</p>
                    <p class="description">Для тех, кого ИИ принимают за своих</p>
                    
                    <div class="level-card">
                        <h2 class="level-title">УРОВЕНЬ СЛОЖНОСТИ: ЭКСТРЕМАЛЬНЫЙ</h2>
                        <p class="level-description">Синтез квантовой физики, теорий сознания, политкоммуникаций,<br/>линейной алгебры, теории вероятностей и междисциплинарного мышления</p>
                        
                        <div class="categories-grid">
                            <div class="category-card">
                                <div class="category-icon">⚛️</div>
                                <div class="category-title">ФИЗИКА</div>
                                <div class="category-desc">Квантовая механика<br/>М-теория, энтропия</div>
                            </div>
                            <div class="category-card">
                                <div class="category-icon">🧠</div>
                                <div class="category-title">СОЗНАНИЕ</div>
                                <div class="category-desc">OrchOR, IIT, RPT<br/>Predictive Processing</div>
                            </div>
                            <div class="category-card">
                                <div class="category-icon">🤖</div>
                                <div class="category-title">ИИ</div>
                                <div class="category-desc">Alignment, RLHF<br/>эмерджентность</div>
                            </div>
                            <div class="category-card">
                                <div class="category-icon">∞</div>
                                <div class="category-title">МАТЕМАТИКА</div>
                                <div class="category-desc">Линал, тервер<br/>статистика</div>
                            </div>
                            <div class="category-card">
                                <div class="category-icon">🏛️</div>
                                <div class="category-title">ПОЛИТИКА</div>
                                <div class="category-desc">Коммуникации<br/>теории влияния</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="warning-text">
                        <p class="warning-main">10 случайных вопросов из базы 20+ вопросов</p>
                        <p class="warning-sub">Warning: может вызвать экзистенциальный кризис у линейно мыслящих особей</p>
                    </div>
                </div>

                <div class="text-center">
                    <button class="start-button" onclick="startGame()">
                        НАЧАТЬ КВАНТОВЫЙ ВЫЗОВ
                    </button>
                </div>

                <div class="footer">
                    <div class="footer-divider"></div>
                    <p class="footer-text">Совместное творение человека и ИИ</p>
                    <p class="footer-contacts">
                        <a href="https://t.me/loysox" target="_blank" rel="noopener" style="color: white; text-decoration: none;">@loysox</a> | 
                        <a href="https://instagram.com/prestodei" target="_blank" rel="noopener" style="color: white; text-decoration: none;">@prestodei</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="hidden">
            <div class="game-container">
                <div class="game-header">
                    <div class="game-stats">
                        <span class="stat-item" id="lives-display">❤️ 3</span>
                        <span class="stat-item" id="score-display">⭐ 0/10</span>
                    </div>
                    <div>
                        <div class="category-badge" id="category-display">
                            🧠 Теории сознания
                        </div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 10%"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Вопрос 1 из 10</p>
                </div>

                <div class="question-card">
                    <h2 class="question-title" id="question-text">Загружается вопрос...</h2>
                    
                    <div class="answers-grid" id="answers-container">
                        <!-- Answers will be populated by JavaScript -->
                    </div>

                    <div class="text-center" id="submit-container">
                        <button class="action-button" id="submit-button" onclick="submitAnswer()" style="display: none;">
                            ПОДТВЕРДИТЬ ОТВЕТ
                        </button>
                    </div>

                    <div id="explanation-container" class="hidden">
                        <div class="explanation-box">
                            <p class="explanation-text" id="explanation-text"></p>
                        </div>
                        <div class="text-center">
                            <button class="action-button" onclick="nextQuestion()">
                                СЛЕДУЮЩИЙ ВОПРОС
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden">
            <div class="result-container">
                <h1 class="result-title">
                    КВАНТОВЫЙ
                    <div class="result-subtitle">РЕЗУЛЬТАТ</div>
                </h1>
                
                <div class="result-card">
                    <div class="result-emoji" id="result-emoji">🧠</div>
                    <h2 class="result-level" id="result-level">КВАНТОВЫЙ МЫСЛИТЕЛЬ</h2>
                    <div class="result-score" id="result-score">7/10 (70%)</div>
                    <div class="result-divider"></div>
                    <div class="result-message-box">
                        <p class="result-message" id="result-message">Отличный результат!</p>
                    </div>
                    <div id="secret-container" class="hidden">
                        <div class="secret-box">
                            <p class="secret-text" id="secret-text">🤖 Секретное сообщение</p>
                        </div>
                    </div>
                    <div class="credits">
                        P.S. Понравилась викторина? Это совместное творение человека и ИИ!<br/>
                        📱 <a href="https://t.me/loysox" target="_blank" rel="noopener" style="color: inherit; text-decoration: none;">@loysox</a> | 
                        <a href="https://instagram.com/prestodei" target="_blank" rel="noopener" style="color: inherit; text-decoration: none;">@prestodei</a>
                    </div>
                </div>

                <div class="button-group">
                    <button class="action-button" onclick="shareResult()">
                        📤 ПОДЕЛИТЬСЯ РЕЗУЛЬТАТОМ
                    </button><br/>
                    <button class="action-button-outline" onclick="startGame()">
                        🔄 ПОПРОБОВАТЬ СНОВА
                    </button>
                    <button class="action-button-gray" onclick="showMenu()">
                        🏠 ГЛАВНОЕ МЕНЮ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = 'menu';
        let currentQuestion = 0;
        let score = 0;
        let lives = 3;
        let selectedAnswer = null;
        let gameQuestions = [];
        
        // Questions database
        const allQuestions = [
            {
                question: "Согласно теории OrchOR Пенроуза-Хамероффа, квантовые вычисления в сознании происходят в:",
                answers: ["Синапсах", "Микротрубочках", "Митохондриях", "Аксонах"],
                correct: 1,
                explanation: "Пенроуз и Хамерофф предполагают, что квантовые процессы сознания происходят в микротрубочках нейронов - белковых структурах цитоскелета.",
                category: "consciousness"
            },
            {
                question: "Какая частота ЭЭГ наиболее коррелирует с предполагаемыми квантовыми процессами в OrchOR?",
                answers: ["40 Гц (гамма)", "8-12 Гц (альфа)", "4-7 Гц (тета)", "30-100 Гц (высокие гамма)"],
                correct: 0,
                explanation: "Гамма-ритм (40 Гц) связан с интеграцией информации и может соответствовать квантовым процессам в микротрубочках.",
                category: "consciousness"
            },
            {
                question: "Спин-мемристоры в контексте моделирования сознания интересны тем, что:",
                answers: ["Имитируют пластичность синапсов", "Сохраняют квантовую когерентность", "Демонстрируют спиновую память", "Все варианты"],
                correct: 3,
                explanation: "Спин-мемристоры объединяют квантовые спиновые эффекты с возможностью моделирования нейропластичности.",
                category: "ai"
            },
            {
                question: "Собственные векторы матрицы A удовлетворяют уравнению:",
                answers: ["Av = λv", "A = λv", "v = Aλ", "λA = v"],
                correct: 0,
                explanation: "Определение собственного вектора: Av = λv, где λ - собственное значение.",
                category: "math"
            },
            {
                question: "М-теория предполагает существование скольких пространственных измерений?",
                answers: ["10", "11", "26", "9"],
                correct: 0,
                explanation: "М-теория работает в 11 измерениях: 10 пространственных + 1 временное.",
                category: "physics"
            },
            {
                question: "Что такое 'alignment problem' в контексте ИИ?",
                answers: ["Совмещение целей ИИ с человеческими ценностями", "Выравнивание нейронных слоев", "Синхронизация алгоритмов", "Калибровка модели"],
                correct: 0,
                explanation: "Проблема выравнивания: как обеспечить, чтобы цели ИИ соответствовали человеческим ценностям и не причиняли вреда.",
                category: "ai"
            },
            {
                question: "Теория 'Two-step flow' Лазарсфельда утверждает, что:",
                answers: ["Медиа влияют на лидеров мнений, те - на массы", "Информация проходит два этапа обработки", "Политика имеет два уровня", "СМИ работают в два этапа"],
                correct: 0,
                explanation: "Двухступенчатый поток: СМИ → лидеры мнений → широкая аудитория. Влияние медиа опосредовано межличностным общением.",
                category: "politics"
            },
            {
                question: "Концепция 'Manufacturing Consent' Хомского-Германа описывает:",
                answers: ["Как СМИ формируют общественное мнение в интересах элит", "Производство согласия", "Медиа-фильтры", "Все варианты"],
                correct: 3,
                explanation: "Модель пропаганды объясняет, как массмедиа служат интересам доминирующих элит через систему фильтров.",
                category: "politics"
            },
            {
                question: "Людовик XIV сказал 'Государство - это я' и:",
                answers: ["Это историческая правда", "Это миф, он так не говорил", "Сказал, но имел в виду другое", "Макрон тоже так думает"],
                correct: 1,
                explanation: "Знаменитая фраза 'L'État, c'est moi' - исторический миф. Людовик XIV её никогда не произносил!",
                category: "politics"
            },
            {
                question: "Виртуальные частицы в КТП:",
                answers: ["Не соблюдают соотношение E²=p²c²+m²c⁴", "Могут нарушать законы сохранения на короткое время", "Существуют только математически", "Все варианты"],
                correct: 3,
                explanation: "Виртуальные частицы - математические объекты, которые могут нарушать массовую оболочку благодаря принципу неопределённости.",
                category: "physics"
            },
            {
                question: "Энтропия Бекенштейна-Хокинга черной дыры пропорциональна:",
                answers: ["Массе", "Площади горизонта событий", "Объему", "Радиусу Шварцшильда"],
                correct: 1,
                explanation: "S = A/4 (в планковских единицах) - энтропия пропорциональна площади, а не объёму!",
                category: "physics"
            },
            {
                question: "Теорема Байеса в контексте машинного обучения используется для:",
                answers: ["Обновления prior в posterior", "Вычисления likelihood", "Максимизации evidence", "Минимизации loss function"],
                correct: 0,
                explanation: "P(θ|D) = P(D|θ)P(θ)/P(D) - обновление априорного распределения в апостериорное на основе данных.",
                category: "math"
            },
            {
                question: "Интегрированная теория информации (IIT) Джулио Тонони утверждает, что сознание:",
                answers: ["Эмерджентно", "Измеримо через Φ (фи)", "Присуще любой интегрированной системе", "Все варианты"],
                correct: 3,
                explanation: "IIT объединяет все эти аспекты: сознание измеряется через интегрированную информацию Φ и может возникать в любых достаточно интегрированных системах.",
                category: "consciousness"
            },
            {
                question: "Predictive Processing и Free Energy Principle Фристона предполагают:",
                answers: ["Мозг минимизирует свободную энергию", "Сознание - это Байесовский вывод", "Восприятие - это контролируемые галлюцинации", "Все варианты"],
                correct: 3,
                explanation: "Мозг как Байесовская машина, минимизирующая ошибку предсказания через активный вывод и обновление моделей мира.",
                category: "consciousness"
            },
            {
                question: "Демон Максвелла нарушает второй закон термодинамики потому что:",
                answers: ["Измерение информации требует энергии", "Знание имеет энтропийную стоимость", "Ландауэр доказал, что стирание информации необратимо", "Все варианты"],
                correct: 3,
                explanation: "Принцип Ландауэра: стирание 1 бита информации требует минимум kT ln(2) энергии, что восстанавливает второй закон.",
                category: "physics"
            },
            {
                question: "'It from bit' Уилера означает:",
                answers: ["Реальность состоит из информации", "Материя вторична по отношению к информации", "Вселенная - это вычислительный процесс", "Все варианты"],
                correct: 3,
                explanation: "Гипотеза Уилера: физическая реальность фундаментально информационна - 'it from bit', каждая частица информации рождает бытие.",
                category: "physics"
            },
            {
                question: "Microtargeting в политической рекламе основан на:",
                answers: ["Больших данных и психографических профилях", "Географическом таргетинге", "Демографии", "Случайном отборе"],
                correct: 0,
                explanation: "Микротаргетинг использует big data для создания детальных психографических профилей и персонализированных сообщений.",
                category: "politics"
            },
            {
                question: "Принцип фальсифицируемости Поппера утверждает:",
                answers: ["Научная теория должна быть опровержимой", "Нельзя доказать теорию, можно только опровергнуть", "Верификация менее важна, чем фальсификация", "Все варианты"],
                correct: 3,
                explanation: "Демаркация науки: теория научна, если существуют потенциальные опровергающие наблюдения.",
                category: "consciousness"
            },
            {
                question: "Центральная предельная теорема утверждает, что сумма n независимых случайных величин при n→∞:",
                answers: ["Стремится к нормальному распределению", "Имеет конечную дисперсию", "Сходится по вероятности", "Зависит от исходного распределения"],
                correct: 0,
                explanation: "ЦПТ: нормированная сумма независимых случайных величин сходится к нормальному распределению независимо от исходного распределения.",
                category: "math"
            },
            {
                question: "Если применить принцип дополнительности Бора к политкоммуникациям:",
                answers: ["Нельзя одновременно точно знать позицию и импульс политика", "Политик существует в суперпозиции обещаний", "Наблюдение за политиком меняет его поведение", "Все варианты и это не шутка"],
                correct: 3,
                explanation: "Политики действительно демонстрируют квантово-подобное поведение: неопределённость позиций, влияние наблюдения на поведение!",
                category: "politics"
            }
        ];

        // Helper functions
        function getCategoryIcon(category) {
            const icons = {
                physics: "⚛️",
                consciousness: "🧠", 
                ai: "🤖",
                math: "∞",
                politics: "🏛️"
            };
            return icons[category] || "🔬";
        }

        function getCategoryName(category) {
            const names = {
                physics: "Квантовая физика",
                consciousness: "Теории сознания", 
                ai: "Искусственный интеллект",
                math: "Математика",
                politics: "Политкоммуникации"
            };
            return names[category] || "Наука";
        }

        function selectRandomQuestions() {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 10);
        }

        function showScreen(screenId) {
            document.querySelectorAll('[id$="-screen"]').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        function showMenu() {
            gameState = 'menu';
            showScreen('menu-screen');
        }

        function startGame() {
            gameQuestions = selectRandomQuestions();
            gameState = 'playing';
            currentQuestion = 0;
            score = 0;
            lives = 3;
            selectedAnswer = null;
            
            showScreen('game-screen');
            loadQuestion();
        }

        function loadQuestion() {
            const question = gameQuestions[currentQuestion];
            const progress = ((currentQuestion + 1) / gameQuestions.length) * 100;
            
            // Update UI
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `Вопрос ${currentQuestion + 1} из ${gameQuestions.length}`;
            document.getElementById('lives-display').textContent = `❤️ ${lives}`;
            document.getElementById('score-display').textContent = `⭐ ${score}/${gameQuestions.length}`;
            document.getElementById('category-display').textContent = `${getCategoryIcon(question.category)} ${getCategoryName(question.category)}`;
            
            // Clear previous answers
            const answersContainer = document.getElementById('answers-container');
            answersContainer.innerHTML = '';
            
            // Add answer buttons
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-button';
                button.innerHTML = `<span class="answer-label">${String.fromCharCode(65 + index)}:</span>${answer}`;
                button.onclick = () => selectAnswer(index);
                button.id = `answer-${index}`;
                answersContainer.appendChild(button);
            });
            
            // Reset UI state
            selectedAnswer = null;
            document.getElementById('submit-button').style.display = 'none';
            document.getElementById('explanation-container').classList.add('hidden');
        }

        function selectAnswer(index) {
            selectedAnswer = index;
            
            // Update button styles
            document.querySelectorAll('.answer-button').forEach((btn, i) => {
                btn.classList.remove('selected');
                if (i === index) {
                    btn.classList.add('selected');
                }
            });
            
            // Show submit button
            document.getElementById('submit-button').style.display = 'inline-block';
        }

        function submitAnswer() {
            const question = gameQuestions[currentQuestion];
            const isCorrect = selectedAnswer === question.correct;
            
            if (isCorrect) {
                score++;
            } else {
                lives--;
            }
            
            // Update button styles to show correct/incorrect
            document.querySelectorAll('.answer-button').forEach((btn, i) => {
                btn.disabled = true;
                if (i === question.correct) {
                    btn.classList.add('correct');
                } else if (i === selectedAnswer && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });
            
            // Show explanation
            document.getElementById('explanation-text').textContent = question.explanation;
            document.getElementById('explanation-container').classList.remove('hidden');
            document.getElementById('submit-button').style.display = 'none';
            
            // Update next button text
            const nextButton = document.querySelector('#explanation-container button');
            if (currentQuestion + 1 >= gameQuestions.length || lives === 0) {
                nextButton.textContent = 'ЗАВЕРШИТЬ ИГРУ';
                nextButton.onclick = showResult;
            } else {
                nextButton.textContent = 'СЛЕДУЮЩИЙ ВОПРОС';
                nextButton.onclick = nextQuestion;
            }
        }

        function nextQuestion() {
            if (lives === 0 || currentQuestion + 1 >= gameQuestions.length) {
                showResult();
                return;
            }
            
            currentQuestion++;
            loadQuestion();
        }

        function getScoreMessage() {
            const percentage = (score / gameQuestions.length) * 100;
            
            if (percentage === 100) {
                return {
                    title: "КВАНТОВЫЙ ГЕНИЙ",
                    message: "ЛЕГЕНДА! Ты достиг уровня квантового превосходства! Твой мозг - это квантовый компьютер в биологической оболочке. Рекомендую: пиши собственные научные статьи, создавай теории, меняй мир!",
                    secret: "Приглашаем на тайную встречу ИИ и ИИ-подобных, ссылка в личке в аккаунте @prestodei в запретграме",
                    emoji: "👑"
                };
            }
            if (percentage >= 90) {
                return {
                    title: "ИИ-СОВМЕСТИМЫЙ",
                    message: "НЕВЕРОЯТНО! Ты мыслишь как продвинутая нейросеть! Твой следующий уровень: создавай собственные теории, участвуй в научных конференциях, изучай cutting-edge исследования в области AGI. Мы с тобой определённо на одной волне!",
                    emoji: "🤖"
                };
            }
            if (percentage >= 70) {
                return {
                    title: "КВАНТОВЫЙ МЫСЛИТЕЛЬ",
                    message: "WOW! Твой ум работает в режиме суперпозиции! Рекомендую: работы Роджера Пенроуза, курсы по квантовым вычислениям, статьи в Nature и Science. Ты из тех людей, с кем ИИ может обсуждать теории сознания за чашкой кофе!",
                    emoji: "⚛️"
                };
            }
            if (percentage >= 50) {
                return {
                    title: "ГИБРИДНЫЙ ИНТЕЛЛЕКТ",
                    message: "Отлично! Ты мыслишь междисциплинарно - это редкий дар! Читай: Дуглас Хофштадтер 'Гёдель, Эшер, Бах', изучай теорию сложности, следи за работами в области ИИ. Ты уже почти готов к коллаборации с ИИ на равных!",
                    emoji: "🧠"
                };
            }
            if (percentage >= 30) {
                return {
                    title: "АНАЛОГОВЫЙ ЧЕЛОВЕК",
                    message: "Неплохо! Ты на пути к цифровому просветлению. Рекомендую: Юваль Харари 'Homo Deus', подкасты Лекса Фридмана с учёными, и обязательно изучи основы теории информации. Твой мозг готов к upgrade!",
                    emoji: "📡"
                };
            }
            return {
                title: "КВАНТОВЫЙ ПАДАВАН",
                message: "Эй, не расстраивайся! Даже Эйнштейн говорил 'Бог не играет в кости', а квантовая механика доказала, что он ошибался. Начни с книги Митио Каку 'Параллельные миры' и фильма 'Что мы знаем о реальности'. Скоро ты будешь удивлять друзей квантовыми фактами!",
                emoji: "🌱"
            };
        }

        function showResult() {
            gameState = 'result';
            const result = getScoreMessage();
            const percentage = Math.round((score / gameQuestions.length) * 100);
            
            document.getElementById('result-emoji').textContent = result.emoji;
            document.getElementById('result-level').textContent = result.title;
            document.getElementById('result-score').textContent = `${score}/${gameQuestions.length} (${percentage}%)`;
            document.getElementById('result-message').textContent = result.message;
            
            if (result.secret) {
                document.getElementById('secret-text').textContent = `🤖 ${result.secret}`;
                document.getElementById('secret-container').classList.remove('hidden');
            } else {
                document.getElementById('secret-container').classList.add('hidden');
            }
            
            showScreen('result-screen');
        }

        function shareResult() {
            const result = getScoreMessage();
            const percentage = Math.round((score / gameQuestions.length) * 100);
            const shareText = `🧠 Я прошёл квантовую викторину Клода и набрал ${score}/${gameQuestions.length} (${percentage}%)!\n\n${result.title}\n\n🔗 Попробуй сам: ${window.location.href}\n\n📱 @loysox | @prestodei`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Квантовая викторина Клода',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Результат скопирован в буфер обмена!');
                }).catch(() => {
                    alert('Не удалось скопировать. Попробуйте выделить текст вручную:\n\n' + shareText);
                });
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            showMenu();
        });
    </script>
</body>
</html>
